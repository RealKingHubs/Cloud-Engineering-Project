---
- name: Deploy Secure Web Application
  hosts: webservers
  become: yes
  gather_facts: yes  #This collects the Hostname and IP for my HTML

  tasks:
    - name: Update apt cache and install NGINX
      apt:
        name: nginx
        state: present
        update_cache: yes

    - name: Start and enable NGINX
      service:
        name: nginx
        state: started
        enabled: yes

    - name: Deploy custom HTML page
      copy:
        dest: /var/www/html/index.html
        content: |
          <!DOCTYPE html>
          <html>
          <head>
            <title>Cloud Project</title>
            <style>body { font-family: sans-serif; text-align: center; padding-top: 50px; }</style>
          </head>
          <body>
            <h1>Secure Web Application Deployment</h1>
            <p><strong>Name:</strong> Kingsley</p>
            <p><strong>Hostname:</strong> {{ ansible_hostname }}</p>
            <p><strong>Private IP:</strong> {{ ansible_default_ipv4.address }}</p>
            <p><strong>About Me:</strong> Junior Cloud Engineer learning AWS, Linux, and Ansible.</p>
          </body>
          </html>
